CREATE TABLE users(
	id INT NOT NULL AUTO_INCREMENT ,
    username VARCHAR(30) NOT NULL ,
    pwd VARCHAR(255) NOT NULL,
    email VARCHAR (100) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIME,
    role VARCHAR(100) NOT NULL DEFAULT 'user',
    PRIMARY KEY(id)
);


CREATE TABLE car (
    id INT NOT NULL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    brand VARCHAR(200) NOT NULL,
    main_image TEXT NOT NULL,
    transmission VARCHAR(200) NOT NULL,
    fuel VARCHAR(200) NOT NULL,
    seats INT CHECK (seats > 0),
    rental_price DECIMAL(10, 2) NOT NULL,
    model VARCHAR(200) NOT NULL,
userID INT (11) NOT NULL
);
ALTER TABLE car ADD CONSTRAINT car_userFK FOREIGN KEY
(userID) REFERENCES users(id) ON DELETE CASCADE ON UPDATE CASCADE;



ALTER TABLE car_detail
ADD CONSTRAINT car_detailFK
FOREIGN KEY (carID) REFERENCES car(id)
ON DELETE CASCADE
ON UPDATE CASCADE;



ALTER TABLE car_rental
ADD CONSTRAINT car_rentalFK_car
FOREIGN KEY (carID) REFERENCES car(id)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE car_rental
ADD CONSTRAINT car_rentalFK_user
FOREIGN KEY (userID) REFERENCES users(id)
ON DELETE CASCADE
ON UPDATE CASCADE;
CREATE TABLE car_detail (
    id INT NOT NULL PRIMARY KEY,
    main_one TEXT NOT NULL,
    main_two TEXT,
    main_three TEXT,
    color VARCHAR(200) NOT NULL,
    number_of_car INT CHECK (number_of_car >= 0),
    available BOOLEAN DEFAULT TRUE,
    kms_driven DECIMAL(10, 2) NOT NULL,
    carID INT
);


CREATE TABLE car_rental (
    id INT NOT NULL PRIMARY KEY,
    resevtion_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    location_from TEXT NOT NULL,
    location_to TEXT NOT NULL,
    number_of_car INT NOT NULL,
    driving_license TINYINT(1),
    driving_license_image TEXT,
    payment_method VARCHAR(255) DEFAULT 'cash',
    payment_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    userID INT NOT NULL,
    carID INT NOT NULL
);




CREATE TABLE htl_reservations (
    reservation_id INT AUTO_INCREMENT PRIMARY KEY,
    id INT NOT NULL,
    checkin_date DATETIME NOT NULL,
    checkout_date DATETIME NOT NULL,
    guest_name VARCHAR(100) NOT NULL,
    guest_email VARCHAR(255) NOT NULL
 );


CREATE TABLE hotels(
    hotel_id INT AUTO_INCREMENT PRIMARY KEY,
    img VARCHAR(255) NOT NULL,
    name VARCHAR(100) NOT NULL,
    city VARCHAR(100) NOT NULL,
    location VARCHAR(255)
);

CREATE TABLE reservations (
    reservation_id INT AUTO_INCREMENT PRIMARY KEY,
    restaurant_id INT,
    user_name VARCHAR(100) NOT NULL,
    user_email VARCHAR(100) NOT NULL,
    reservation_date DATE NOT NULL,
    reservation_time TIME NOT NULL,
    num_people INT NOT NULL
);

CREATE TABLE restaurants(
    restaurant_id INT AUTO_INCREMENT PRIMARY KEY,
    img_url VARCHAR(255) NOT NULL,
    name VARCHAR(100) NOT NULL,
    menu_url VARCHAR(255) NOT NULL,
    address VARCHAR(255) NOT NULL,
    category VARCHAR(255) NOT NULL

);
ALTER TABLE restaurants ADD CONSTRAINT fk_resturent_user FOREIGN KEY (id) REFERENCES users (id);
ALTER TABLE htl_reservations ADD CONSTRAINT fk_hotel FOREIGN KEY (hotel_id) REFERENCES hotels (id);
ALTER TABLE reservations ADD CONSTRAINT fk_resturent FOREIGN KEY (restaurant_id) REFERENCES restaurants (id);

CREATE TABLE wishlist (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    item_id INT
);ALTER TABLE wishlist ADD CONSTRAINT wishlist_user_FK FOREIGN KEY (user_id) REFERENCES users(id), ADD CONSTRAINT wishlist_item_FK FOREIGN KEY (item_id) REFERENCES car(id);